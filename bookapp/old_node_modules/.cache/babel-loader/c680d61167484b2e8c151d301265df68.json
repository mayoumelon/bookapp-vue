{"remainingRequest":"/usr/src/app/bookapp/node_modules/babel-loader/lib/index.js!/usr/src/app/bookapp/node_modules/cache-loader/dist/cjs.js??ref--0-0!/usr/src/app/bookapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/src/app/bookapp/src/pages/BookSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/src/app/bookapp/src/pages/BookSearch.vue","mtime":1617487988859},{"path":"/usr/src/app/bookapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/bookapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/usr/src/app/bookapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/bookapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi91c3Ivc3JjL2FwcC9ib29rYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi91c3Ivc3JjL2FwcC9ib29rYXBwL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQm9va1NlYXJjaCcsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGtleXdvcmQ6ICcnLAogICAgICBzZWFyY2hSZXN1bHRzOiBbXQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZEJvb2tMaXN0OiBmdW5jdGlvbiBhZGRCb29rTGlzdChpbmRleCkgewogICAgICB0aGlzLiRlbWl0KCdhZGQtYm9vay1saXN0JywgdGhpcy5zZWFyY2hSZXN1bHRzW2luZGV4XSk7CiAgICB9LAogICAgc2VhcmNoOiBmdW5jdGlvbiBzZWFyY2goa2V5d29yZCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgYmFzZVVybCwgcGFyYW1zLCBxdWVyeVBhcmFtcywgcmVzcG9uc2UsIF9pdGVyYXRvciwgX3N0ZXAsIGJvb2ssIHRpdGxlLCBpbWcsIGRlc2NyaXB0aW9uOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfdGhpcy5zZWFyY2hSZXN1bHRzID0gW107IC8vIOOCr+OCqOODquODvOOCueODiOODquODs+OCsOOCkuS9nOaIkAoKICAgICAgICAgICAgICAgIGJhc2VVcmwgPSAnaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vYm9va3MvdjEvdm9sdW1lcz8nOwogICAgICAgICAgICAgICAgcGFyYW1zID0gewogICAgICAgICAgICAgICAgICBxOiAiaW50aXRsZToiLmNvbmNhdChrZXl3b3JkKSwKICAgICAgICAgICAgICAgICAgbWF4UmVzdWx0czogNDAKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1zKTsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGJhc2VVcmwgKyBxdWVyeVBhcmFtcyk7IC8vIGZldGNo44GnSlNPTuWPluW+lwoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKGJhc2VVcmwgKyBxdWVyeVBhcmFtcykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmpzb24oKTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICByZXNwb25zZSA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZS5pdGVtcyk7IC8vIOW/heimgeOBquaDheWgseOCkumFjeWIl+OBq3B1c2gKCiAgICAgICAgICAgICAgICBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihyZXNwb25zZS5pdGVtcyk7CgogICAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgICAgICAgICBib29rID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgICAgICAgdGl0bGUgPSBib29rLnZvbHVtZUluZm8udGl0bGU7CiAgICAgICAgICAgICAgICAgICAgaW1nID0gYm9vay52b2x1bWVJbmZvLmltYWdlTGlua3M7CiAgICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb24gPSBib29rLnZvbHVtZUluZm8uZGVzY3JpcHRpb247CgogICAgICAgICAgICAgICAgICAgIF90aGlzLnNlYXJjaFJlc3VsdHMucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUgPyB0aXRsZSA6ICcnLAogICAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IGltZyA/IGltZy50aHVtYm5haWwgOiAnJywKICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBkZXNjcmlwdGlvbiA/IGRlc2NyaXB0aW9uLnNsaWNlKDAsIDQwKSA6ICcnCiAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["BookSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,aAAA,EAAA;AAFA,KAAA;AAIA,GAPA;AAQA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,KADA,EACA;AACA,WAAA,KAAA,CAAA,eAAA,EAAA,KAAA,aAAA,CAAA,KAAA,CAAA;AACA,KAHA;AAIA,IAAA,MAJA,kBAIA,OAJA,EAIA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACA,gBAAA,KAAA,CAAA,aAAA,GAAA,EAAA,CADA,CAEA;;AACA,gBAAA,OAHA,GAGA,8CAHA;AAIA,gBAAA,MAJA,GAIA;AACA,kBAAA,CAAA,oBAAA,OAAA,CADA;AAEA,kBAAA,UAAA,EAAA;AAFA,iBAJA;AAQA,gBAAA,WARA,GAQA,IAAA,eAAA,CAAA,MAAA,CARA;AASA,gBAAA,OAAA,CAAA,GAAA,CAAA,OAAA,GAAA,WAAA,EATA,CAWA;;AAXA;AAAA,uBAYA,KAAA,CAAA,OAAA,GAAA,WAAA,CAAA,CACA,IADA,CACA,UAAA,QAAA;AAAA,yBAAA,QAAA,CAAA,IAAA,EAAA;AAAA,iBADA,CAZA;;AAAA;AAYA,gBAAA,QAZA;AAcA,gBAAA,OAAA,CAAA,GAAA,CAAA,QAAA,CAAA,KAAA,EAdA,CAgBA;;AAhBA,uDAiBA,QAAA,CAAA,KAjBA;;AAAA;AAiBA,sEAAA;AAAA,oBAAA,IAAA;AACA,oBAAA,KADA,GACA,IAAA,CAAA,UAAA,CAAA,KADA;AAEA,oBAAA,GAFA,GAEA,IAAA,CAAA,UAAA,CAAA,UAFA;AAGA,oBAAA,WAHA,GAGA,IAAA,CAAA,UAAA,CAAA,WAHA;;AAIA,oBAAA,KAAA,CAAA,aAAA,CAAA,IAAA,CAAA;AACA,sBAAA,KAAA,EAAA,KAAA,GAAA,KAAA,GAAA,EADA;AAEA,sBAAA,KAAA,EAAA,GAAA,GAAA,GAAA,CAAA,SAAA,GAAA,EAFA;AAGA,sBAAA,WAAA,EAAA,WAAA,GAAA,WAAA,CAAA,KAAA,CAAA,CAAA,EAAA,EAAA,CAAA,GAAA;AAHA,qBAAA;AAKA;AA1BA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4BA;AAhCA;AARA,CAAA","sourcesContent":["<template>\n  <div>\n    <v-row>\n      <v-col cols=\"6\">\n        <v-text-field\n        label=\"本のタイトルを検索\"\n        v-model=\"keyword\">\n        </v-text-field>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col cols=\"3\">\n        <v-btn\n          color=\"primary\"\n          @click=\"search(keyword)\">\n          検索する          \n        </v-btn>\n      </v-col>\n      <v-col cols=\"3\">\n        <v-btn\n          color=\"secondary\"\n          to=\"/\">\n        一覧に戻る\n        </v-btn>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col cols=\"12\" md=\"6\" \n      v-for=\"(book, index) in searchResults\" :key=\"book.index\">\n      <v-card class=\"mx-auto my-5\" color=\"yellow\">\n        <v-row>\n          <v-col cols=\"4\">\n            <v-img :src=\"book.image\"></v-img>\n          </v-col>\n          <v-col cols=\"8\">\n            <v-card-title>{{ book.title}}</v-card-title>\n            {{ book.description }}\n            <v-spacer></v-spacer>\n            <v-card-actions>\n                  <v-btn\n                    fab\n                    dark\n                    color=\"indigo\"\n                    @click=\"addBookList(index)\"\n                  >\n                    <v-icon dark>\n                      mdi-plus\n                    </v-icon>\n                  </v-btn>\n            </v-card-actions>\n          </v-col>\n        </v-row>\n      </v-card>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nexport default {\n  name:'BookSearch',\n  data(){\n    return {\n      keyword:'',\n      searchResults:[]\n    }\n  },\n  methods:{\n    addBookList(index){\n      this.$emit('add-book-list', this.searchResults[index])\n    },\n    async search(keyword){\n      this.searchResults = []\n      // クエリーストリングを作成\n      const baseUrl = 'https://www.googleapis.com/books/v1/volumes?'\n      const params = {\n        q: `intitle:${keyword}`,\n        maxResults:40\n      }\n      const queryParams = new URLSearchParams(params)\n      console.log(baseUrl + queryParams)\n\n      // fetchでJSON取得\n      const response = await fetch(baseUrl + queryParams)\n      .then( response => response.json())\n      console.log(response.items)\n\n      // 必要な情報を配列にpush\n      for (let book of response.items ) {\n        let title = book.volumeInfo.title\n        let img = book.volumeInfo.imageLinks\n        let description = book.volumeInfo.description\n        this.searchResults.push({\n          title: title ? title : '',\n          image: img ? img.thumbnail : '',\n          description: description ? description.slice(0, 40) : '',\n        })\n      }\n\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>"],"sourceRoot":"src/pages"}]}