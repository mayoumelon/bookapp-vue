{"remainingRequest":"/usr/src/app/bookapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/src/app/bookapp/src/App.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/src/app/bookapp/src/App.vue","mtime":1617842696080},{"path":"/usr/src/app/bookapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/bookapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/usr/src/app/bookapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/bookapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAnQC9nbG9iYWwvSGVhZGVyJzsKaW1wb3J0IEZvb3RlciBmcm9tICdAL2dsb2JhbC9Gb290ZXInOwpjb25zdCBTVE9SQUdFX0tFWSA9ICdib29rcycKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnQXBwJywKCiAgY29tcG9uZW50czogewogICAgSGVhZGVyLAogICAgRm9vdGVyCiAgfSwKCiAgZGF0YSgpewogICAgcmV0dXJuIHsKICAgICAgYm9va3M6IFtdLAogICAgICBuZXdCb29rOiBudWxsCiAgICB9CiAgfSwKICBtb3VudGVkKCkgewogICAgaWYgKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZKSkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuYm9va3MgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFNUT1JBR0VfS0VZKSk7CiAgICAgIH0gY2F0Y2goZSkgewogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWRkQm9vayhlKSB7CiAgICAgIHRoaXMuYm9va3MucHVzaCh7CiAgICAgICAgaWQ6IHRoaXMuYm9va3MubGVuZ3RoLAogICAgICAgIHRpdGxlOiBlLnRpdGxlLAogICAgICAgIGltYWdlOiBlLmltYWdlLAogICAgICAgIGRlc2NyaXB0aW9uOiBlLmRlc2NyaXB0aW9uLAogICAgICAgIHJlYWREYXRlOiAnJywKICAgICAgICBtZW1vOiAnJwogICAgICB9KTsKICAgICAgLy8gdGhpcy5uZXdCb29rID0gJyc7CiAgICAgIHRoaXMuc2F2ZUJvb2tzKCk7CiAgICAgIC8vIOacgOW+jOOBq+i/veWKoOOBl+OBn2lk44Gu5Y+W5b6X44Kz44O844OJCiAgICAgIC8vIGNvbnNvbGUubG9nKCfmnIDlvozjga5JRDogJyArIHRoaXMuYm9va3Muc2xpY2UoLTEpWzBdLmlkKQogICAgICB0aGlzLmdvVG9FZGl0UGFnZSh0aGlzLmJvb2tzLnNsaWNlKC0xKVswXS5pZCkKICAgIH0sCiAgICByZW1vdmVCb29rKHgpIHsKICAgICAgdGhpcy5ib29rcy5zcGxpY2UoeCwgMSk7CiAgICAgIHRoaXMuc2F2ZUJvb2tzKCk7CiAgICB9LAogICAgc2F2ZUJvb2tzKCkgewogICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmJvb2tzKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksIHBhcnNlZCk7CiAgICB9LAogICAgdXBkYXRlQm9va0luZm8oZSl7CiAgICAgIGNvbnN0IHVwZGF0ZUluZm8gPSB7CiAgICAgICAgaWQ6IGUuaWQsCiAgICAgICAgcmVhZERhdGU6IGUucmVhZERhdGUsCiAgICAgICAgbWVtbzogZS5tZW1vLAogICAgICAgIHRpdGxlOiB0aGlzLmJvb2tzW2UuaWRdLnRpdGxlLAogICAgICAgIGltYWdlOiB0aGlzLmJvb2tzW2UuaWRdLmltYWdlLAogICAgICAgIGRlc2NyaXB0aW9uOiB0aGlzLmJvb2tzW2UuaWRdLmRlc2NyaXB0aW9uCiAgICAgIH0KICAgICAgLy8gYm9va3PphY3liJfjgpLmm7TmlrAKICAgICAgdGhpcy5ib29rcy5zcGxpY2UoZS5pZCwgMSwgdXBkYXRlSW5mbykKICAgICAgLy8gTG9jYWxTdG9yYWdl44G4CiAgICAgIHRoaXMuc2F2ZUJvb2tzKCkKICAgICAgLy8g44OI44OD44OX44G4CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvJykKICAgIH0sCiAgICBnb1RvRWRpdFBhZ2UoaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goYC9lZGl0LyR7aWR9YCkKICAgIH0sCiAgICBkZWxldGVMb2NhbFN0b3JhZ2UoKXsKICAgICAgY29uc3QgaXNEZWxldGVkID0gJ0xvY2FsU3RvcmFnZeOBruODh+ODvOOCv+OCkuWJiumZpOOBl+OBpuOCguOBhOOBhOOBp+OBmeOBi++8nycKICAgICAgaWYod2luZG93LmNvbmZpcm0oaXNEZWxldGVkKSl7CiAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksICcnKQogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKFNUT1JBR0VfS0VZKQogICAgICAgIHRoaXMuYm9va3MgPSBbXQogICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKQogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["App.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"App.vue","sourceRoot":"src","sourcesContent":["<template>\n  <v-app>\n    <Header\n    @delete-local-storage=\"deleteLocalStorage\" \n    />\n    <v-main>\n      <v-container>\n        <router-view \n        :books=\"books\" \n        @add-book-list=\"addBook\" \n        @update-book-info=\"updateBookInfo\" />\n  </v-app>\n</template>\n\n<script>\nimport Header from '@/global/Header';\nimport Footer from '@/global/Footer';\nconst STORAGE_KEY = 'books'\n\nexport default {\n  name: 'App',\n\n  components: {\n    Header,\n    Footer\n  },\n\n  data(){\n    return {\n      books: [],\n      newBook: null\n    }\n  },\n  mounted() {\n    if (localStorage.getItem(STORAGE_KEY)) {\n      try {\n        this.books = JSON.parse(localStorage.getItem(STORAGE_KEY));\n      } catch(e) {\n        localStorage.removeItem(STORAGE_KEY);\n      }\n    }\n  },\n  methods: {\n    addBook(e) {\n      this.books.push({\n        id: this.books.length,\n        title: e.title,\n        image: e.image,\n        description: e.description,\n        readDate: '',\n        memo: ''\n      });\n      // this.newBook = '';\n      this.saveBooks();\n      // 最後に追加したidの取得コード\n      // console.log('最後のID: ' + this.books.slice(-1)[0].id)\n      this.goToEditPage(this.books.slice(-1)[0].id)\n    },\n    removeBook(x) {\n      this.books.splice(x, 1);\n      this.saveBooks();\n    },\n    saveBooks() {\n      const parsed = JSON.stringify(this.books);\n      localStorage.setItem(STORAGE_KEY, parsed);\n    },\n    updateBookInfo(e){\n      const updateInfo = {\n        id: e.id,\n        readDate: e.readDate,\n        memo: e.memo,\n        title: this.books[e.id].title,\n        image: this.books[e.id].image,\n        description: this.books[e.id].description\n      }\n      // books配列を更新\n      this.books.splice(e.id, 1, updateInfo)\n      // LocalStorageへ\n      this.saveBooks()\n      // トップへ\n      this.$router.push('/')\n    },\n    goToEditPage(id) {\n      this.$router.push(`/edit/${id}`)\n    },\n    deleteLocalStorage(){\n      const isDeleted = 'LocalStorageのデータを削除してもいいですか？'\n      if(window.confirm(isDeleted)){\n        localStorage.setItem(STORAGE_KEY, '')\n        localStorage.removeItem(STORAGE_KEY)\n        this.books = []\n        window.location.reload()\n      }\n    }\n  }\n};\n</script>\n"]}]}