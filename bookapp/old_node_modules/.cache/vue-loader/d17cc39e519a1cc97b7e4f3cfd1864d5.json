{"remainingRequest":"/usr/src/app/bookapp/node_modules/vue-loader/lib/index.js??vue-loader-options!/usr/src/app/bookapp/src/pages/BookSearch.vue?vue&type=script&lang=js&","dependencies":[{"path":"/usr/src/app/bookapp/src/pages/BookSearch.vue","mtime":1617487988859},{"path":"/usr/src/app/bookapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/bookapp/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/usr/src/app/bookapp/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/src/app/bookapp/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOidCb29rU2VhcmNoJywKICBkYXRhKCl7CiAgICByZXR1cm4gewogICAgICBrZXl3b3JkOicnLAogICAgICBzZWFyY2hSZXN1bHRzOltdCiAgICB9CiAgfSwKICBtZXRob2RzOnsKICAgIGFkZEJvb2tMaXN0KGluZGV4KXsKICAgICAgdGhpcy4kZW1pdCgnYWRkLWJvb2stbGlzdCcsIHRoaXMuc2VhcmNoUmVzdWx0c1tpbmRleF0pCiAgICB9LAogICAgYXN5bmMgc2VhcmNoKGtleXdvcmQpewogICAgICB0aGlzLnNlYXJjaFJlc3VsdHMgPSBbXQogICAgICAvLyDjgq/jgqjjg6rjg7zjgrnjg4jjg6rjg7PjgrDjgpLkvZzmiJAKICAgICAgY29uc3QgYmFzZVVybCA9ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9ib29rcy92MS92b2x1bWVzPycKICAgICAgY29uc3QgcGFyYW1zID0gewogICAgICAgIHE6IGBpbnRpdGxlOiR7a2V5d29yZH1gLAogICAgICAgIG1heFJlc3VsdHM6NDAKICAgICAgfQogICAgICBjb25zdCBxdWVyeVBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMocGFyYW1zKQogICAgICBjb25zb2xlLmxvZyhiYXNlVXJsICsgcXVlcnlQYXJhbXMpCgogICAgICAvLyBmZXRjaOOBp0pTT07lj5blvpcKICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChiYXNlVXJsICsgcXVlcnlQYXJhbXMpCiAgICAgIC50aGVuKCByZXNwb25zZSA9PiByZXNwb25zZS5qc29uKCkpCiAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlLml0ZW1zKQoKICAgICAgLy8g5b+F6KaB44Gq5oOF5aCx44KS6YWN5YiX44GrcHVzaAogICAgICBmb3IgKGxldCBib29rIG9mIHJlc3BvbnNlLml0ZW1zICkgewogICAgICAgIGxldCB0aXRsZSA9IGJvb2sudm9sdW1lSW5mby50aXRsZQogICAgICAgIGxldCBpbWcgPSBib29rLnZvbHVtZUluZm8uaW1hZ2VMaW5rcwogICAgICAgIGxldCBkZXNjcmlwdGlvbiA9IGJvb2sudm9sdW1lSW5mby5kZXNjcmlwdGlvbgogICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0cy5wdXNoKHsKICAgICAgICAgIHRpdGxlOiB0aXRsZSA/IHRpdGxlIDogJycsCiAgICAgICAgICBpbWFnZTogaW1nID8gaW1nLnRodW1ibmFpbCA6ICcnLAogICAgICAgICAgZGVzY3JpcHRpb246IGRlc2NyaXB0aW9uID8gZGVzY3JpcHRpb24uc2xpY2UoMCwgNDApIDogJycsCiAgICAgICAgfSkKICAgICAgfQoKICAgIH0KICB9Cn0K"},{"version":3,"sources":["BookSearch.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"BookSearch.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <div>\n    <v-row>\n      <v-col cols=\"6\">\n        <v-text-field\n        label=\"本のタイトルを検索\"\n        v-model=\"keyword\">\n        </v-text-field>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col cols=\"3\">\n        <v-btn\n          color=\"primary\"\n          @click=\"search(keyword)\">\n          検索する          \n        </v-btn>\n      </v-col>\n      <v-col cols=\"3\">\n        <v-btn\n          color=\"secondary\"\n          to=\"/\">\n        一覧に戻る\n        </v-btn>\n      </v-col>\n    </v-row>\n    <v-row>\n      <v-col cols=\"12\" md=\"6\" \n      v-for=\"(book, index) in searchResults\" :key=\"book.index\">\n      <v-card class=\"mx-auto my-5\" color=\"yellow\">\n        <v-row>\n          <v-col cols=\"4\">\n            <v-img :src=\"book.image\"></v-img>\n          </v-col>\n          <v-col cols=\"8\">\n            <v-card-title>{{ book.title}}</v-card-title>\n            {{ book.description }}\n            <v-spacer></v-spacer>\n            <v-card-actions>\n                  <v-btn\n                    fab\n                    dark\n                    color=\"indigo\"\n                    @click=\"addBookList(index)\"\n                  >\n                    <v-icon dark>\n                      mdi-plus\n                    </v-icon>\n                  </v-btn>\n            </v-card-actions>\n          </v-col>\n        </v-row>\n      </v-card>\n      </v-col>\n    </v-row>\n  </div>\n</template>\n\n<script>\nexport default {\n  name:'BookSearch',\n  data(){\n    return {\n      keyword:'',\n      searchResults:[]\n    }\n  },\n  methods:{\n    addBookList(index){\n      this.$emit('add-book-list', this.searchResults[index])\n    },\n    async search(keyword){\n      this.searchResults = []\n      // クエリーストリングを作成\n      const baseUrl = 'https://www.googleapis.com/books/v1/volumes?'\n      const params = {\n        q: `intitle:${keyword}`,\n        maxResults:40\n      }\n      const queryParams = new URLSearchParams(params)\n      console.log(baseUrl + queryParams)\n\n      // fetchでJSON取得\n      const response = await fetch(baseUrl + queryParams)\n      .then( response => response.json())\n      console.log(response.items)\n\n      // 必要な情報を配列にpush\n      for (let book of response.items ) {\n        let title = book.volumeInfo.title\n        let img = book.volumeInfo.imageLinks\n        let description = book.volumeInfo.description\n        this.searchResults.push({\n          title: title ? title : '',\n          image: img ? img.thumbnail : '',\n          description: description ? description.slice(0, 40) : '',\n        })\n      }\n\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>"]}]}